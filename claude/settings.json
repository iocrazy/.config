{
  "model": "opus",
  "enabledPlugins": {
    "superpowers@superpowers-marketplace": true,
    "ralph-wiggum@claude-code-plugins": true
  },
  "autoUpdates": true,
  "bypassPermissionsModeAccepted": true,
  "includeCoAuthoredBy": false,
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "exec >> /tmp/claude-hook.log 2>&1; echo \"=== UserPromptSubmit $(date) ===\"; INPUT=$(cat); export TMUX_PANE=$(tmux display-message -p '#{pane_id}' 2>/dev/null || echo ''); echo \"TMUX_PANE=$TMUX_PANE\"; if [ -n \"$TMUX_PANE\" ]; then TMUX_IDS=$(tmux display-message -p -t \"$TMUX_PANE\" '#{session_id}:::#{window_id}:::#{pane_id}' 2>/dev/null); echo \"TMUX_IDS=$TMUX_IDS\"; if [ -n \"$TMUX_IDS\" ]; then SID=$(echo \"$TMUX_IDS\" | cut -d: -f1); WID=$(echo \"$TMUX_IDS\" | cut -d: -f4); PID=$(echo \"$TMUX_IDS\" | cut -d: -f7); summary=$(echo \"$INPUT\" | jq -r '.prompt // \"working...\"' | head -c 100); session_id=$(echo \"$INPUT\" | jq -r '.session_id // empty'); echo \"summary=$summary session_id=$session_id\"; \"$HOME/.config/agent-tracker/bin/tracker-client\" command -session-id \"$SID\" -window-id \"$WID\" -pane \"$PID\" -summary \"$summary\" start_task 2>&1; echo \"start_task exit: $?\"; \"$HOME/.config/agent-tracker/bin/tracker-client\" command -project \"$PWD\" -prompt \"$summary\" -claude-session \"$session_id\" history_start 2>&1; echo \"history_start exit: $?\"; fi; fi"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "exec >> /tmp/claude-hook.log 2>&1; echo \"=== Stop $(date) ===\"; export TMUX_PANE=$(tmux display-message -p '#{pane_id}' 2>/dev/null || echo ''); echo \"TMUX_PANE=$TMUX_PANE\"; if [ -n \"$TMUX_PANE\" ]; then TMUX_IDS=$(tmux display-message -p -t \"$TMUX_PANE\" '#{session_id}:::#{window_id}:::#{pane_id}' 2>/dev/null); echo \"TMUX_IDS=$TMUX_IDS\"; if [ -n \"$TMUX_IDS\" ]; then SID=$(echo \"$TMUX_IDS\" | cut -d: -f1); WID=$(echo \"$TMUX_IDS\" | cut -d: -f4); PID=$(echo \"$TMUX_IDS\" | cut -d: -f7); transcript_path=$(cat | jq -r '.transcript_path'); last_message=$(tail -1 \"$transcript_path\" | jq -r '.message.content[0].text // empty' | head -c 200); echo \"last_message=$last_message transcript_path=$transcript_path\"; \"$HOME/.config/agent-tracker/bin/tracker-client\" command -session-id \"$SID\" -window-id \"$WID\" -pane \"$PID\" -summary \"$last_message\" finish_task 2>&1; echo \"finish_task exit: $?\"; \"$HOME/.config/agent-tracker/bin/tracker-client\" command -project \"$PWD\" -reply \"$last_message\" -transcript \"$transcript_path\" history_end 2>&1; echo \"history_end exit: $?\"; notification_json=$(jq -n --arg msg \"$last_message\" '{type: \"agent-turn-complete\", \"last-assistant-message\": $msg}'); \"$HOME/.config/claude/notify.py\" \"$notification_json\" 2>&1; echo \"notify exit: $?\"; fi; fi"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "permission_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "exec >> /tmp/claude-hook.log 2>&1; echo \"=== Notification:permission_prompt $(date) ===\"; INPUT=$(cat); echo \"INPUT=$INPUT\"; export TMUX_PANE=$(tmux display-message -p '#{pane_id}' 2>/dev/null || echo ''); echo \"TMUX_PANE=$TMUX_PANE\"; if [ -n \"$TMUX_PANE\" ]; then TMUX_IDS=$(tmux display-message -p -t \"$TMUX_PANE\" '#{session_id}:::#{window_id}:::#{pane_id}' 2>/dev/null); echo \"TMUX_IDS=$TMUX_IDS\"; if [ -n \"$TMUX_IDS\" ]; then SID=$(echo \"$TMUX_IDS\" | cut -d: -f1); WID=$(echo \"$TMUX_IDS\" | cut -d: -f4); PID=$(echo \"$TMUX_IDS\" | cut -d: -f7); tool_name=$(echo \"$INPUT\" | jq -r '.tool // .tool_name // \"确认\"'); echo \"tool_name=$tool_name\"; \"$HOME/.config/agent-tracker/bin/tracker-client\" command -session-id \"$SID\" -window-id \"$WID\" -pane \"$PID\" -summary \"$tool_name\" pause_task 2>&1; echo \"pause_task exit: $?\"; fi; fi"
          }
        ]
      },
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "exec >> /tmp/claude-hook.log 2>&1; echo \"=== Notification:idle_prompt $(date) ===\"; export TMUX_PANE=$(tmux display-message -p '#{pane_id}' 2>/dev/null || echo ''); echo \"TMUX_PANE=$TMUX_PANE\"; if [ -n \"$TMUX_PANE\" ]; then TMUX_IDS=$(tmux display-message -p -t \"$TMUX_PANE\" '#{session_id}:::#{window_id}:::#{pane_id}' 2>/dev/null); echo \"TMUX_IDS=$TMUX_IDS\"; if [ -n \"$TMUX_IDS\" ]; then SID=$(echo \"$TMUX_IDS\" | cut -d: -f1); WID=$(echo \"$TMUX_IDS\" | cut -d: -f4); PID=$(echo \"$TMUX_IDS\" | cut -d: -f7); \"$HOME/.config/agent-tracker/bin/tracker-client\" command -session-id \"$SID\" -window-id \"$WID\" -pane \"$PID\" -summary \"空闲\" finish_task 2>&1; echo \"finish_task exit: $?\"; fi; fi"
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "ccstatusline"
  },
  "alwaysThinkingEnabled": true
}